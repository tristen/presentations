<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>Webmaps and your data.</title>
  <link rel='stylesheet' href='big.css' />
  <script src='big.js'></script>
  <script src='js/rainbow.min.js'></script>
  <script src='js/generic.js'></script>
  <script src='js/javascript.js'></script>
  <script src='js/html.js'></script>
  <style>
    .slide-1 {
      background:#b7ddf3;
      color:#fff;
      }
    .slide-3 { background:#3887be; }
    .slide-2 {
      background:#f5c272;
      color:#f86767;
      text-shadow:20px 20px 0 #fff;
      }
    .slide-23 {
      background-image:url(images/open-toronto.png);
      }
    .slide-40 {
      background-image:url(images/two-birds.png);
      color:#000;
      text-shadow:20px 20px 0 rgba(255,255,255,0.75);
      }
    .overlay {
      text-shadow:0 5px 0 rgba(0,0,0,0.20);
      }
    .dazzel {
      -webkit-animation: rainbow 2s steps(36) infinite;
      }
    @-webkit-keyframes rainbow {
      from { -webkit-filter:hue-rotate(5deg); }
      to { -webkit-filter:hue-rotate(360deg); }
    }
    @keyframes rainbow {
      from { filter:hue-rotate(5deg); }
      to { filter:hue-rotate(360deg); }
      }
      iframe {
        background:#fff;
        position:fixed;
        top:0;left:0;
        display:block;
        width:100%;
        height:100%;
        z-index:-1;
        }
      strong {
        color:#f86767;
        }
  </style>
</head>
<body>

<div class='overlay'>
  <iframe src='iframes/one.html' frameborder='0'></iframe>
  Web maps and your data.
</div>

<div>
  Hi
</div>
<div>
  I work at <a href='https://mapbox.com/'>Mapbox</a>
</div>

<div>
  Let's talk about <strong>GeoJSON</strong>.
</div>

<div>
  But first.
</div>

<div>
  Let's talk about open formats
</div>

<!--
  Shapefiles: a format proposed to be open but required close sourced
  programs to run it. Also, reading the data source is undecipherable.

  KML on the otherhand is a step in the right direction like many
  web technologies but designed around XML.

  GeoJSON is an easily decierable key value format. It's designed to be
  read easily and parsable by machines.

  Like most specs on the web they aren't perfect but as a format it's
  dumb and works everywhere on the web. The internet prefers open formats.
-->
<div>
  ESRI shapefile <strong>to</strong><br />KML <strong>to</strong><br /> GeoJSON
</div>

<!--
  Open up a plain text editor. It's just works.
-->
<div>
  <strong>GeoJSON</strong> just works.
</div>

<!--
  A specification that leans on a data format called JSON.
  JSON resembles JavaScript making it a perfect candidate for
  clientside rendering of data onto web maps.
-->
<div>
<pre><code data-language='javascript'>
{
  "type": "FeatureCollection",
  "features": []
}
</code></pre>
</div>
<div>
<pre><code data-language='javascript'>
{
  "type": "FeatureCollection",
  "features": [{
    "type": "Feature",
    "geometry": {
        "type": "GEOMETRY TYPE",
        "coordinates": [LONGITUDE, LATITUDE]
    }
  }]
}
</code></pre>
</div>

<div>
Let's look at three geometry types:
</div>

<div class='overlay'>
Point
<iframe src='iframes/simple-marker.html' frameborder='0'></iframe>
</div>

<!--
  With each of these examples mention how the coordinates
  are structured. How the type key changes.
  Also, point out the addition of the properties object.
-->
<div>
<pre><code data-language='javascript'>
{
  "type": "FeatureCollection",
  "features": [{
    "type": "Feature",
    "geometry": {
        "type": "Point",
        "coordinates": [-79.456619918346, 43.655750033205]
    },
    "properties": {
        "marker-color": "#1087bf",
        "marker-size": "medium"
    }
  }]
}
</code></pre>
</div>

<div class='overlay'>
LineString
<iframe src='iframes/simple-linestring.html' frameborder='0'></iframe>
</div>

<div>
<pre><code data-language='javascript'>
{
 "type": "FeatureCollection",
 "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [-79.458419680595, 43.655290114084],
          [-79.39434170723, 43.6471856448971]
        ]
      },
      "properties": {
        "stroke": "#1087bf",
        "stroke-opacity": 1,
        "stroke-width": 4
      }
    }
  ]
}
</code></pre>
</div>

<div class='overlay'>
Polygon
<iframe src='iframes/simple-polygon.html' frameborder='0'></iframe>
</div>

<div>
<pre><code data-language='javascript'>
{
  "type": "FeatureCollection",
  "features": [
    {
     "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [-79.458430409431, 43.655286232895],
            [-79.452352523804, 43.639429482344],
            [-79.443426132202, 43.636882696096],
            [-79.394309520721, 43.647007085851],
            [-79.402227401733, 43.667188660125],
            [-79.458430409431, 43.655286232895]
          ]
        ]
      },
      "properties": {
        "fill": "#1087bf",
        "fill-opacity": 0.2,
        "stroke": "#1087bf",
        "stroke-opacity": 1,
        "stroke-width": 4
      }
    }
  ]
}
</code></pre>
</div>

<div class='overlay'>
All together
<iframe src='iframes/simple-all.html' frameborder='0'></iframe>
</div>

<div>
<pre><code data-language='javascript'>
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
          "type": "Point",
          "coordinates": [-79.456619918346, 43.655750033205]
      }
    }, {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [-79.458419680595, 43.655290114084],
          [-79.39434170723, 43.6471856448971]
        ]
      }
    }, {
     "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [-79.458430409431, 43.655286232895],
            [-79.452352523804, 43.639429482344],
            [-79.443426132202, 43.636882696096],
            [-79.394309520721, 43.647007085851],
            [-79.402227401733, 43.667188660125],
            [-79.458430409431, 43.655286232895]
          ]
        ]
      }
    }
  ]
}
</code></pre>
</div>

<div>
  BTW: How were those maps rendered?
</div>

<!--
  - This is an HTML document ubiquitous on the web
  - Point out the line that connects the GeoJSON file to it.
  - I'm using mapbox.js here to render the map.
  - All you need is a internet connection and a text editor.
-->
<div>

<pre><code data-language='html'>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset='utf-8'&gt;
  &lt;script src='https://api.tiles.mapbox.com/mapbox.js/v2.0.1/mapbox.js'&gt;&lt;/script&gt;
  &lt;link href='https://api.tiles.mapbox.com/mapbox.js/v2.0.1/mapbox.css' rel='stylesheet' /&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id='map'&gt;&lt;/div&gt;
  &lt;script&gt;
    L.mapbox.accessToken = 'TOKEN';

    var map = L.mapbox.map('map', 'USERNAME.MAPID');
        map.setView([43.6659, -79.4390], 13);

    var features = L.mapbox.featureLayer()
        features.loadURL('FILENAME.geojson')
        features.addTo(map);
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div>

<div>
  Data that matters to us.
</div>

<div class='center'>
  <a href='http://toronto.ca/open'>toronto.ca/open</a>
</div>

<!--
  First thing I'm going to do is download this and open the
  file into a program called QGIS.
-->
<div class='center'>
  Bicycle shops
  <img src='images/highlight-open-toronto.png' alt='' />
</div>

<div>
  Convert the ESRI <strong>Shapefile to GeoJSON</strong> using <a href='http://www.qgis.org/en/site/forusers/download.html'>QGIS</a>.
</div>

<div>
  <iframe src='iframes/qgis-steps.html' frameborder='0'></iframe>
</div>

<div>
  What it looks like rendered?
</div>

<div class='overlay'>
  Bike shops!
  <iframe src='iframes/bikes.html' frameborder='0'></iframe>
</div>

<div class='center'>
<pre><code data-language='javascript'>
var markers = L.mapbox.featureLayer();

markers.loadURL('bikes.geojson');
markers.addTo(map);
</code></pre>
</div>

<div>
  Tooltips? <strong class='dazzel'>Color</strong>?
</div>

<div>
Afterall, there's other data in this file
</div>

<!--
  Afterall, the data exported has pertinent
  property data accompanied with it.
  A single marker looks like this in our file.
-->
<div class='center'>
<pre><code data-language='javascript'>
{ "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [ -79.368594933508703, 43.6549938877586 ]
  },
  "properties": {
    "ADDRESS": "242 Queen St E",
    "POSTAL_CD": "M5A 1S3",
    "NAME": "Charlie's Bike Joint",
    "PHONE": "416-546-2200",
    "EMAIL": "charlies@thebikejoint.com",
    "RENTAL": "NO"
  }
},
</code></pre>
</div>

<div class='overlay'>
  Fancy Bike shops!
  <iframe src='iframes/bikes-two.html' frameborder='0'></iframe>
</div>

<div>
  This just scratches the surface.
</div>

<!--
  - Making data easier to receive and building great tools around.
  - BTW I link to Ben Balters excellent talk from that link
    I recommend watching it.
-->
<div>
  Technology is helping us democratize stuff
  <a href='https://www.mapbox.com/blog/geodc-github/'>@benbalter</a>
</div>

<div class='center'>
  <a href='http://git.io/CSBGHw'>github.com/tristen/toronto-open-data/</a>
</div>

<div>
QA:
</div>
<div>
  1. What if my data is in a different format like <strong>CSV</strong>?
</div>
<div>
  2. What if my data <strong>doesn't contain latitude and longitude</strong> coordinates?
</div>

<div>
one stone
</div>

<div class='center'>
toronto-attractions.csv
<pre><code>
Address,Address Info,City,Province,Title,Category,Phone Number
1675 Lake Shore Blvd East,,Toronto,Ontario,Woodbine Beach,Beach,311
195 Rouge Hills Drive,,Toronto,Ontario,Rouge Beach,Beach,311
350 King Street West,,Toronto,Ontario,TIFF Bell Lightbox,Cinema,416-599-8433
2901 Yonge St,,Toronto,Ontario,Alexander Muir Memorial Gardens,Featured Park,311
1675 Lake Shore Boulevard East,,Toronto,Ontario,Ashbridges Bay Park,Featured Park,311
1 Brimley Road South,,Toronto,Ontario,Bluffers Park (Scarborough Bluffs),Featured Park,311
256 Centennial Park Road,,Toronto,Ontario,Centennial Park,Featured Park,311
7450 Kingston Road,,Toronto,Ontario,Glen Rouge Campground,Featured Park,416-287-2267
201 Guildwood Parkway,,Toronto,Ontario,Guildwood Park,Featured Park,416-397-2628
1873 Bloor Street West,,Toronto,Ontario,High Park,Featured Park,311
205 Humber College Blvd,,Toronto,Ontario,Humber Arboretum,Featured Park,416-287-2267
2075 Queen Street East,,Toronto,Ontario,Kew Gardens,Featured Park,311
550 Broadview Ave,,Toronto,Ontario,Riverdale Park East,Featured Park,311
500 Gerrard Street East,,Toronto,Ontario,Riverdale Park West,Featured Park,311
1749 Meadowvale Road,,Toronto,Ontario,Rouge Park,Featured Park,905-713-6038
479 Queen's Quay West,,Toronto,Ontario,Toronto Music Garden,Featured Park,311
</code></pre>
</div>

<div class='center'>
  <a  href='http://tristen.ca/forrest'>tristen.ca/forrest</a>
</div>

<div>
  <iframe src='images/forrest.gif' frameborder='0'></iframe>
</div>

<div class='overlay'>
  Toronto attractions!
  <iframe src='iframes/attractions.html' frameborder='0'></iframe>
</div>

<div class='center'>
<pre><code data-language='html'>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset='utf-8'&gt;
  &lt;title&gt;&lt;/title&gt;
  &lt;script src='https://api.tiles.mapbox.com/mapbox.js/v2.0.1/mapbox.js'&gt;&lt;/script&gt;
  &lt;link href='https://api.tiles.mapbox.com/mapbox.js/v2.0.1/mapbox.css' rel='stylesheet' /&gt;
  &lt;script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id='map'&gt;&lt;/div&gt;
&lt;script&gt;
  L.mapbox.accessToken = 'TOKEN';
  L.mapbox.map('map', 'USERNAME.MAPID', {
    zoomControl: false
  });

  omnivore.csv('../data/attractions.csv').addTo(map);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div>

<div class='center'>
  Thank you!<br />
  <a href='https://github.com/tristen/'>github.com/tristen</a><br />
  <a href='https://twitter.com/fallsemo/'>@fallsemo</a>
</div>

<div class='center'>
  Slides online:
  <a href='http://tristen.ca/presentations/webmaps-and-your-data/'>goo.gl/LRjEqa</a>
</div>
</body>
</html>
